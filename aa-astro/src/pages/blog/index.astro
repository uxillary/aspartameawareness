---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
const posts = await getCollection('posts');
const slice = posts.sort((a,b)=> new Date(b.data.publishDate||0)-new Date(a.data.publishDate||0));
const title = "Blog";
const description = "Latest posts and updates.";
---
<BaseLayout {title} {description}>
  <ul class="space-y-5">
    {slice.map(({ data, slug }) => (
      <li class="card">
        <a href={`/blog/${slug}`} class="text-lg font-medium hover:underline underline-offset-4">{data.title}</a>
        {data.publishDate && <div class="text-xs opacity-70 mt-1">{new Date(data.publishDate).toLocaleDateString()}</div>}
        {data.description && <p class="mt-2 text-sm opacity-90">{data.description}</p>}
        <div class="mt-3 flex gap-2 flex-wrap">
          {(data.tags||[]).slice(0,5).map(t=>(<span class="badge">{t}</span>))}
        </div>
      </li>
    ))}
  </ul>
</BaseLayout>
